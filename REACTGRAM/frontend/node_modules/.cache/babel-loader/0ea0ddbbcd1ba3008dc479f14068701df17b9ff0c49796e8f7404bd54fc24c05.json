{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/leoga/Desktop/Backup/GitHub/reactgram-project/REACTGRAM/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/leoga/Desktop/Backup/GitHub/reactgram-project/REACTGRAM/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import userService from\"../services/userService\";var initialState={user:{},error:false,success:false,loading:false,message:null};// Get user details, for edit data\nexport var profile=createAsyncThunk(\"user/profile\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=thunkAPI.getState().auth.user.token;_context.next=3;return userService.profile(user,token);case 3:data=_context.sent;console.log(data);return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Update user details\nexport var updateProfile=createAsyncThunk(\"user/update\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=thunkAPI.getState().auth.user.token;_context2.next=3;return userService.updateProfile(user,token);case 3:data=_context2.sent;if(!data.errors){_context2.next=6;break;}return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(data.errors[0]));case 6:console.log(data);return _context2.abrupt(\"return\",data);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Get user details\nexport var getUserDetails=createAsyncThunk(\"user/get\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=thunkAPI.getState().auth.user.token;_context3.next=3;return userService.getUserDetails(id,token);case 3:data=_context3.sent;console.log(data);return _context3.abrupt(\"return\",data);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var userSlice=createSlice({name:\"user\",initialState:initialState,reducers:{resetMessage:function resetMessage(state){state.message=null;}},extraReducers:function extraReducers(builder){builder.addCase(profile.pending,function(state){state.loading=true;state.error=null;}).addCase(profile.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;}).addCase(updateProfile.pending,function(state){state.loading=true;state.error=null;}).addCase(updateProfile.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;state.message=\"User updated successfully!\";}).addCase(updateProfile.rejected,function(state,action){state.loading=false;state.error=action.payload;state.user=null;}).addCase(getUserDetails.pending,function(state){state.loading=true;state.error=null;}).addCase(getUserDetails.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;});}});var resetMessage=userSlice.actions.resetMessage;export{resetMessage};export default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userService","initialState","user","error","success","loading","message","profile","thunkAPI","token","getState","auth","data","console","log","updateProfile","errors","rejectWithValue","getUserDetails","id","userSlice","name","reducers","resetMessage","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/leoga/Desktop/Backup/GitHub/reactgram-project/REACTGRAM/frontend/src/slices/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport userService from \"../services/userService\";\r\n\r\nconst initialState = {\r\n  user: {},\r\n  error: false,\r\n  success: false,\r\n  loading: false,\r\n  message: null,\r\n};\r\n\r\n// Get user details, for edit data\r\nexport const profile = createAsyncThunk(\r\n  \"user/profile\",\r\n  async (user, thunkAPI) => {\r\n    const token = thunkAPI.getState().auth.user.token;\r\n\r\n    const data = await userService.profile(user, token);\r\n\r\n    console.log(data);\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\n// Update user details\r\nexport const updateProfile = createAsyncThunk(\r\n  \"user/update\",\r\n  async (user, thunkAPI) => {\r\n    const token = thunkAPI.getState().auth.user.token;\r\n\r\n    const data = await userService.updateProfile(user, token);\r\n\r\n    // Check for errors\r\n    if (data.errors) {\r\n      return thunkAPI.rejectWithValue(data.errors[0]);\r\n    }\r\n\r\n    console.log(data);\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\n// Get user details\r\nexport const getUserDetails = createAsyncThunk(\r\n  \"user/get\",\r\n  async (id, thunkAPI) => {\r\n    const token = thunkAPI.getState().auth.user.token;\r\n\r\n    const data = await userService.getUserDetails(id, token);\r\n\r\n    console.log(data);\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  reducers: {\r\n    resetMessage: (state) => {\r\n      state.message = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(profile.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(profile.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.success = true;\r\n        state.error = null;\r\n        state.user = action.payload;\r\n      })\r\n      .addCase(updateProfile.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateProfile.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.success = true;\r\n        state.error = null;\r\n        state.user = action.payload;\r\n        state.message = \"User updated successfully!\";\r\n      })\r\n      .addCase(updateProfile.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n        state.user = null;\r\n      })\r\n      .addCase(getUserDetails.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getUserDetails.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.success = true;\r\n        state.error = null;\r\n        state.user = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetMessage } = userSlice.actions;\r\nexport default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}